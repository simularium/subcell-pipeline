<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Run Cytosim compression simulations - Subcellular modeling pipeline 0.1.0</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand"><strong>Subcellular modeling pipeline</strong> <br />0.1.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text"><strong>Subcellular modeling pipeline</strong> <br />0.1.0</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Workflow notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../simulation.html">Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analysis.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../visualization.html">Visualization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.html">simulation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of simulation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.batch_simulations.html">simulation.batch_simulations</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.cytosim.html">simulation.cytosim</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of simulation.cytosim</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.cytosim.post_processing.html">simulation.cytosim.post_processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.post_processing.html">simulation.post_processing</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.readdy.html">simulation.readdy</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of simulation.readdy</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.readdy.data_structures.html">simulation.readdy.data_structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.readdy.loader.html">simulation.readdy.loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.readdy.parser.html">simulation.readdy.parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.simulation.readdy.post_processor.html">simulation.readdy.post_processor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.html">analysis</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of analysis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.compression_metrics.html">analysis.compression_metrics</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of analysis.compression_metrics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.compression_metrics.compression_analysis.html">analysis.compression_metrics.compression_analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.compression_metrics.compression_metric.html">analysis.compression_metrics.compression_metric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.compression_metrics.constants.html">analysis.compression_metrics.constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.compression_metrics.polymer_trace.html">analysis.compression_metrics.polymer_trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.compression_metrics.vectors.html">analysis.compression_metrics.vectors</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.dimensionality_reduction.html">analysis.dimensionality_reduction</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of analysis.dimensionality_reduction</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.dimensionality_reduction.fiber_data.html">analysis.dimensionality_reduction.fiber_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.dimensionality_reduction.pacmap_dim_reduction.html">analysis.dimensionality_reduction.pacmap_dim_reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.dimensionality_reduction.pca_dim_reduction.html">analysis.dimensionality_reduction.pca_dim_reduction</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.tomography_data.html">analysis.tomography_data</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of analysis.tomography_data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.tomography_data.tomography_data.html">analysis.tomography_data.tomography_data</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.wall_clock_time.html">analysis.wall_clock_time</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of analysis.wall_clock_time</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_summary/subcell_pipeline.analysis.wall_clock_time.log_data.html">analysis.wall_clock_time.log_data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.html">visualization</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of visualization</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.combined_trajectory.html">visualization.combined_trajectory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.dimensionality_reduction.html">visualization.dimensionality_reduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.display_data.html">visualization.display_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.fiber_points.html">visualization.fiber_points</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.histogram_plots.html">visualization.histogram_plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.individual_trajectory.html">visualization.individual_trajectory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.scatter_plots.html">visualization.scatter_plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.spatial_annotator.html">visualization.spatial_annotator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_summary/subcell_pipeline.visualization.tomography.html">visualization.tomography</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Project links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/simularium/subcell-pipeline">GitHub</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../../../_sources/_notebooks/simulation/cytosim/_run_cytosim_compression_batch_simulations.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="run-cytosim-compression-simulations">
<h1>Run Cytosim compression simulations<a class="headerlink" href="#run-cytosim-compression-simulations" title="Link to this heading">¶</a></h1>
<p>Notebook contains steps for running Cytosim simulations in which a single actin
fiber is compressed at different compression velocities.</p>
<p>This notebook uses <a class="reference external" href="https://github.com/simularium/Cytosim">Cytosim</a> templates
and scripts. Clone a copy and set the environment variable
<code class="docutils literal notranslate"><span class="pre">CYTOSIM=/path/to/Cytosim/</span></code>.</p>
<p>This notebook provides an example of running a simulation series in which there
are multiple conditions, each of which need to be run for multiple replicates.
For an example of running a simulation series for a single condition for
multiple replicates, see <code class="docutils literal notranslate"><span class="pre">run_cytosim_no_compression_batch_simulations.py</span></code>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#define-simulation-conditions">Define simulation conditions</a></p></li>
<li><p><a class="reference internal" href="#generate-configs-from-template">Generate configs from template</a></p></li>
<li><p><a class="reference internal" href="#define-simulation-settings">Define simulation settings</a></p></li>
<li><p><a class="reference internal" href="#register-and-run-jobs">Register and run jobs</a></p></li>
<li><p><a class="reference internal" href="#check-and-save-job-logs">Check and save job logs</a></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">!=</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;This module is a notebook and is not meant to be imported&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="kn">from</span> <span class="nn">subcell_pipeline.simulation.batch_simulations</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">check_and_save_job_logs</span><span class="p">,</span>
    <span class="n">generate_configs_from_template</span><span class="p">,</span>
    <span class="n">register_and_run_simulations</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">load_dotenv</span><span class="p">()</span>
<span class="n">cytosim_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CYTOSIM&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Template generator uses the Preconfig class from Cytosim. Append the path to
<code class="docutils literal notranslate"><span class="pre">preconfig.py</span></code> from a copy of the <code class="docutils literal notranslate"><span class="pre">Cytosim</span></code> repository, or download a copy into
this location.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cytosim_path</span> <span class="o">/</span> <span class="s2">&quot;python&quot;</span> <span class="o">/</span> <span class="s2">&quot;run&quot;</span><span class="p">))</span>
<span class="kn">from</span> <span class="nn">preconfig</span> <span class="kn">import</span> <span class="n">Preconfig</span>  <span class="c1"># noqa: E402</span>
</pre></div>
</div>
<section id="define-simulation-conditions">
<h2>Define simulation conditions<a class="headerlink" href="#define-simulation-conditions" title="Link to this heading">¶</a></h2>
<p>Defines the <code class="docutils literal notranslate"><span class="pre">ACTIN_COMPRESSION_VELOCITY</span></code> simulation series, which compresses a
single 500 nm actin fiber at four different velocities (4.7, 15, 47, and 150
μm/s) with five replicates each (random seeds 1, 2, 3, 4, and 5).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Name of the simulation series</span>
<span class="n">series_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ACTIN_COMPRESSION_VELOCITY&quot;</span>

<span class="c1"># S3 bucket for input and output files</span>
<span class="n">bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;s3://cytosim-working-bucket&quot;</span>

<span class="c1"># Random seeds for simulations</span>
<span class="n">random_seeds</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># Path to the config template file</span>
<span class="n">path_to_template</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">cytosim_path</span> <span class="o">/</span> <span class="s2">&quot;templates&quot;</span> <span class="o">/</span> <span class="s2">&quot;vary_compress_rate.cym.tpl&quot;</span>

<span class="c1"># Current timestamp used to organize input and outfile files</span>
<span class="n">timestamp</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># File keys for each velocity</span>
<span class="n">velocity_keys</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;4.73413649&quot;</span><span class="p">:</span> <span class="s2">&quot;0047&quot;</span><span class="p">,</span>
    <span class="s2">&quot;15&quot;</span><span class="p">:</span> <span class="s2">&quot;0150&quot;</span><span class="p">,</span>
    <span class="s2">&quot;47.4341649&quot;</span><span class="p">:</span> <span class="s2">&quot;0470&quot;</span><span class="p">,</span>
    <span class="s2">&quot;150&quot;</span><span class="p">:</span> <span class="s2">&quot;1500&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="generate-configs-from-template">
<h2>Generate configs from template<a class="headerlink" href="#generate-configs-from-template" title="Link to this heading">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">Preconfig</span></code> from Cytosim to convert the <code class="docutils literal notranslate"><span class="pre">.cym.tpl</span></code> template file into
local <code class="docutils literal notranslate"><span class="pre">.cym</span></code> config files. For each file, extract the compression velocity to
use as the simulation condition key. Save all config files to S3 bucket.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">preconfig</span> <span class="o">=</span> <span class="n">Preconfig</span><span class="p">()</span>
<span class="n">config_files</span> <span class="o">=</span> <span class="n">preconfig</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">path_to_template</span><span class="p">,</span> <span class="p">{},</span> <span class="n">path</span><span class="o">=</span><span class="n">cytosim_path</span> <span class="o">/</span> <span class="s2">&quot;configs&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;compression_velocity:([\s0-9\.]+)&quot;</span>
<span class="n">group_keys</span> <span class="o">=</span> <span class="n">generate_configs_from_template</span><span class="p">(</span>
    <span class="n">bucket</span><span class="p">,</span>
    <span class="n">series_name</span><span class="p">,</span>
    <span class="n">timestamp</span><span class="p">,</span>
    <span class="n">random_seeds</span><span class="p">,</span>
    <span class="n">config_files</span><span class="p">,</span>
    <span class="n">pattern</span><span class="p">,</span>
    <span class="n">velocity_keys</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="define-simulation-settings">
<h2>Define simulation settings<a class="headerlink" href="#define-simulation-settings" title="Link to this heading">¶</a></h2>
<p>Defines the AWS Batch settings for the simulations. Note that these settings
will need to be modified for different AWS accounts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># AWS account number</span>
<span class="n">aws_account</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">()</span>

<span class="c1"># AWS region</span>
<span class="n">aws_region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;us-west-2&quot;</span>

<span class="c1"># Prefix for job name and image</span>
<span class="n">aws_user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;jessicay&quot;</span>

<span class="c1"># Image name and version</span>
<span class="n">image</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cytosim:0.0.0&quot;</span>

<span class="c1"># Number of vCPUs for each job</span>
<span class="n">vcpus</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># Memory for each job</span>
<span class="n">memory</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">7000</span>

<span class="c1"># Job queue</span>
<span class="n">job_queue</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;general_on_demand&quot;</span>

<span class="c1"># Job array size</span>
<span class="n">job_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">random_seeds</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="register-and-run-jobs">
<h2>Register and run jobs<a class="headerlink" href="#register-and-run-jobs" title="Link to this heading">¶</a></h2>
<p>For each velocity, we create a new job definition that specifies the input
configs and the output location. Each job definition is then registered (for job
definitions with the same name, a new revisions will be created unless no
parameters have changed). All replicates for a given velocities are submitted as
a job array. Job status can be monitored via the AWS Console.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">job_arns</span> <span class="o">=</span> <span class="n">register_and_run_simulations</span><span class="p">(</span>
    <span class="n">bucket</span><span class="p">,</span>
    <span class="n">series_name</span><span class="p">,</span>
    <span class="n">timestamp</span><span class="p">,</span>
    <span class="n">group_keys</span><span class="p">,</span>
    <span class="n">aws_account</span><span class="p">,</span>
    <span class="n">aws_region</span><span class="p">,</span>
    <span class="n">aws_user</span><span class="p">,</span>
    <span class="n">image</span><span class="p">,</span>
    <span class="n">vcpus</span><span class="p">,</span>
    <span class="n">memory</span><span class="p">,</span>
    <span class="n">job_queue</span><span class="p">,</span>
    <span class="n">job_size</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="check-and-save-job-logs">
<h2>Check and save job logs<a class="headerlink" href="#check-and-save-job-logs" title="Link to this heading">¶</a></h2>
<p>Iterates through the list of submitted job ARNs to check job status. If job does
not have the “SUCCEEDED” status, print the current status. If job does have the
“SUCCEEDED” status, then save a copy of the CloudWatch logs. The list of job
ARNs can be manually adjusted to limit which jobs are checks or avoid saving
logs that have already been saved.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">check_and_save_job_logs</span><span class="p">(</span><span class="n">bucket</span><span class="p">,</span> <span class="n">series_name</span><span class="p">,</span> <span class="n">job_arns</span><span class="p">,</span> <span class="n">aws_region</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Allen Institute for Cell Science
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Run Cytosim compression simulations</a><ul>
<li><a class="reference internal" href="#define-simulation-conditions">Define simulation conditions</a></li>
<li><a class="reference internal" href="#generate-configs-from-template">Generate configs from template</a></li>
<li><a class="reference internal" href="#define-simulation-settings">Define simulation settings</a></li>
<li><a class="reference internal" href="#register-and-run-jobs">Register and run jobs</a></li>
<li><a class="reference internal" href="#check-and-save-job-logs">Check and save job logs</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=01f34227"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    </body>
</html>